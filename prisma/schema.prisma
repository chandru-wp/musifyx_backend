generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id        String     @id @default(auto()) @map("_id") @db.ObjectId
  username  String     @unique
  password  String
  name      String?
  role      String // USER or ADMIN
  playlists Playlist[]
}

model Song {
  id          String     @id @default(auto()) @map("_id") @db.ObjectId
  title       String
  artist      String
  image       String
  audioUrl    String
  duration    Int?
  albumId     String?    @db.ObjectId
  album       Album?     @relation(fields: [albumId], references: [id])
  playlistIds String[]   @db.ObjectId
  playlists   Playlist[] @relation(fields: [playlistIds], references: [id])
}

model Album {
  id      String  @id @default(auto()) @map("_id") @db.ObjectId
  title   String
  artist  String
  desc    String
  image   String
  bgColor String?
  songs   Song[]
}

model Playlist {
  id      String   @id @default(auto()) @map("_id") @db.ObjectId
  name    String
  userId  String   @db.ObjectId
  user    User     @relation(fields: [userId], references: [id])
  songIds String[] @db.ObjectId
  songs   Song[]   @relation(fields: [songIds], references: [id])
}
